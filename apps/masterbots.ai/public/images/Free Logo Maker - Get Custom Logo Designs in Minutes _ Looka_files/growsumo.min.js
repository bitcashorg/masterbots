!function(){"use strict";var o="https://grsm.io",r="https://partnerlinks.io";function e(o){return"string"!=typeof o?"":decodeURIComponent(atob(o).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""))}var n,t,s=(n=function(o,r){var e;e=function(){function o(){for(var o=0,r={};o<arguments.length;o++){var e=arguments[o];for(var n in e)r[n]=e[n]}return r}function r(o){return o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(n){function t(){}function s(r,e,s){if("undefined"!=typeof document){"number"==typeof(s=o({path:"/"},t.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var a=JSON.stringify(e);/^[\{\[]/.test(a)&&(e=a)}catch(o){}e=n.write?n.write(e,r):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var i in s)s[i]&&(u+="; "+i,!0!==s[i]&&(u+="="+s[i].split(";")[0]));return document.cookie=r+"="+e+u}}function a(o,e){if("undefined"!=typeof document){for(var t={},s=document.cookie?document.cookie.split("; "):[],a=0;a<s.length;a++){var u=s[a].split("="),i=u.slice(1).join("=");e||'"'!==i.charAt(0)||(i=i.slice(1,-1));try{var c=r(u[0]);if(i=(n.read||n)(i,c)||r(i),e)try{i=JSON.parse(i)}catch(o){}if(t[c]=i,o===c)break}catch(o){}}return o?t[o]:t}}return t.set=s,t.get=function(o){return a(o,!1)},t.getJSON=function(o){return a(o,!0)},t.remove=function(r,e){s(r,"",o(e,{expires:-1}))},t.defaults={},t.withConverter=e,t}((function(){}))},o.exports=e()},n(t={exports:{}},t.exports),t.exports);function a(o){if(null==o)return null;const r=s.get(o);return null==r||null==r?null:r}function u(o){const r=s.get(),e={};for(const n in r)n.startsWith(o)&&(e[n]=r[n]);return 0===Object.keys(e).length?null:e}function i(o,r,e,n,t,s){t=t||"/",s=s||"Lax";const a=e?`Domain=${e};`:"";document.cookie=`${o}=${r}; ${a} Expires=${n}; Path=${t}; SameSite=${s}`}function c(o,r,e){var n=new Date(Date.now()+7776e6).toUTCString();(new TextEncoder).encode(r).length<=255&&(i(o,r,e,n),a(o)!==r&&i(o,r,location.host,n))}const m="gspk",g="gsxid",_="pscd",d=g,l="growSumoPartnerKey",p=_,w="trackingV1",f="ps_xid",k=f,v="ps_partner_key",h=v,y="trackingV2",x="ps_rc_fallback";var b={_b64d:e,_gc:a,_sc:c,domain_v1:o,domain_v2:r,source:null,fallback_domain:null,cookie_domain:location.host,pscd:null,initialized:!1,data:{amount:0,currency:"USD",email:"",name:"",public_key:"",host_domain:""},_rd:function(){growsumo.data.amount=0,growsumo.data.email="",growsumo.data.name="",growsumo.data.currency="USD"},_initialize:function(o){growsumo.cookie_domain=growsumo.cookie_domain.split(":")[0];var r=growsumo.cookie_domain.split(".");r.length>2&&(growsumo.cookie_domain="."+r.slice(1).join(".")),growsumo.data.host_domain=location.host,growsumo.source=growsumo._detect_source(),growsumo.fallback_domain=growsumo._get_fallback_domain(),growsumo.data.public_key=o,growsumo._gpscd(),growsumo._gpk(),growsumo._gxid(),growsumo._pxidrc(),growsumo.initialized=!0},_detect_source:function(){if(growsumo._gpbn(v)||growsumo._gpbn(f))return y;if(growsumo._gpbn(m)||growsumo._gpbn(g))return w;var o=[a(h),a(k)],r=[a(l),a(d)].some((o=>!!o)),e=o.some((o=>!!o));return r&&e?y:r?w:e?y:null},_get_tracking_domain:function(){return null!=growsumo.pscd?"https://"+growsumo.pscd:growsumo.source===y?growsumo.domain_v2:growsumo.domain_v1},_gpk:function(){var o=growsumo._gpbn(m),r=growsumo._gpbn(v);r&&(o=r),o&&(o=e(o)),(o=growsumo._spk(o))||(o=growsumo._get_redirect_cookies_from_tld()),o||growsumo._get_pk_primary_cookie_mirror()},_get_fallback_domain:function(){return growsumo.source==y?growsumo.domain_v1:growsumo.domain_v2},_get_redirect_cookies_from_tld:function(){var o=u("_ps_partner_key_")||u("_grsmpk"),r=null;o&&(r=Object.values(o)[0],growsumo._spk(r),growsumo._flag_redirect_cookies_fallback());var e=u("_ps_xid_")||u("_gsxid");return e&&1===Object.keys(e).length&&(growsumo._sxid(Object.values(e)[0]),growsumo._flag_redirect_cookies_fallback()),r},_flag_redirect_cookies_fallback:function(){c(x,"true",growsumo.cookie_domain),growsumo._pxidrc()},_get_pk_primary_cookie_mirror:function(){var o=growsumo._get_tracking_domain(),r=growsumo.pscd?"":"?get_pscd=true",e=growsumo._ccr("GET",o+"/pr/grc/"+growsumo.data.public_key+r);e.onreadystatechange=()=>{var r=this._parse_grc_response(e,o);if(4==e.readyState&&null==growsumo.data.partner_key&&null==growsumo.data.xid){if(r&&r.customDomains&&r.customDomains.length&&r.customDomains.length>0)r.customDomains.forEach((o=>{var r=growsumo._ccr("GET","https://"+o+"/pr/grc/"+growsumo.data.public_key);r?(r.onreadystatechange=()=>{var e=this._parse_grc_response(r);!e||null==e.partnerKey&&null==e.xid||growsumo._spscd(o)},r.send(null)):console.error("CORS not supported")}));growsumo._get_grc_fallback_cookie_mirror()}},e.send(null)},_get_grc_fallback_cookie_mirror:function(){var o=growsumo._ccr("GET",growsumo.fallback_domain+"/pr/grc/"+growsumo.data.public_key);if(o.onreadystatechange=()=>this._parse_grc_response(o),o.send(null),growsumo.pscd){var r=growsumo.fallback_domain==growsumo.domain_v1?growsumo.domain_v2:growsumo.domain_v1,e=growsumo._ccr("GET",r+"/pr/grc/"+growsumo.data.public_key);e.onreadystatechange=()=>{this._parse_grc_response(e)},e.send(null)}},_parse_grc_response:function(o){if(4==o.readyState&&200==o.status&&o.responseText.length>0)try{var r=JSON.parse(o.responseText);return null==r.partnerKey&&null==r.xid||(growsumo._spk(r.partnerKey),growsumo._sxid(r.xid),growsumo._flag_redirect_cookies_fallback()),r}catch(o){console.error("Error parsing response JSON response")}},_spk:function(o){return o||(o=a(h)||a(l)),o&&(growsumo.data.partner_key=o,c(l,o,growsumo.cookie_domain),c(h,o,growsumo.cookie_domain)),o},_gpscd:function(){var o=growsumo._gpbn(_);o?growsumo._spscd(o):growsumo._spscd()},_spscd:function(o){let r=null!=o?o:a(p);if(null!=r)growsumo.pscd=r,c(p,r,growsumo.cookie_domain);else try{var e=growsumo._get_current_script_source_custom_domain();e&&(growsumo.pscd=e,c(p,e,growsumo.cookie_domain))}catch(o){console.error("Error getting custom domain",o)}},_get_current_script_source_custom_domain:function(){var o=["/pr/js","/partnerstack.min.js","/growsumo.min.js"],r=["grsm.io","partnerlinks.io","partnerstack.com","growsumo.com"],e=document.getElementsByTagName("script"),n=Array.from(e).filter((e=>{if(e.src&&o.some((o=>e.src.endsWith(o)))){var n=new URL(e.src).hostname;return!r.some((o=>n.endsWith(o)))}return!1}));return 1==n.length?new URL(n[0].src).hostname:(n.length>1&&console.error("Multiple scripts found, cannot determine custom domain"),null)},_gxid:function(){var o=growsumo._gpbn(g),r=growsumo._gpbn(f);r&&(o=r,growsumo.source=y),o?growsumo._sxid(o):growsumo._sxid()},_sxid:function(o){let r=o||a(k);null==r&&(r=a(d)),null!=r&&(growsumo.data.xid=r,c(d,r,growsumo.cookie_domain),c(k,r,growsumo.cookie_domain))},_pxidrc:function(){if(growsumo.data.xid){var o="";"true"==a(x)&&(o=-1!==location.href.indexOf("?")?"&rc_fallback=true":"?rc_fallback=true"),growsumo._mr("POST","/pr/receipt",{location:location.href+o,referrer:window.frames.top.document.referrer,xid:growsumo.data.xid,partner_key:growsumo.data.partner_key})}},_gpbn:function(o){return function(o){o=o.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+o+"(=([^&#]*)|&|#|$)"),e=r.exec(location.search);return e||(e=r.exec(location.hash)),e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}(o)},_ccr:function(o,r,e){var n=new XMLHttpRequest;return n.withCredentials=!0,"withCredentials"in n?n.open(o,r,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(o,r):n=null,n},_mr:function(o,r,e,n){var t=growsumo._get_tracking_domain()+r,s=growsumo._ccr(o,t);s?(s.onload=s.onerror=function(t){if(!growsumo.pscd||[200,400].includes(s.status)||!r.endsWith("/signup")||void 0===growsumo.data.partner_key&&void 0===growsumo.data.xid)n&&"function"==typeof n&&n(t);else{var a=growsumo._ccr(o,growsumo.domain_v1+r,e);a.onload=a.onerror=function(t){if(200!=a.status){var s=growsumo._ccr(o,growsumo.domain_v2+r,e);s.onload=s.onerror=function(o){n(o)},s.send(JSON.stringify(e))}else n(t)},a.send(JSON.stringify(e))}},s.send(JSON.stringify(e))):console.error("CORS not supported")},setData:function(o,r,e,n){growsumo.data.amount=o,growsumo.data.currency=r,growsumo.data.email=e,growsumo.data.name=n},createSignup:function(o){growsumo._spk(),growsumo.data.name=String(growsumo.data.name),growsumo.data.email=String(growsumo.data.email),growsumo.data.currency=String(growsumo.data.currency),growsumo.data.amount=Number(growsumo.data.amount);var r=d,e="/pr/signup";growsumo.source==y&&(r=k,e="/signup");var n=a(r);n&&(growsumo.data.xid=String(n)),"true"==a(x)&&(growsumo.data.rc_fallback=!0),growsumo._mr("POST",e,growsumo.data,(function(r){growsumo._rd(),o&&"function"==typeof o&&o(r)}))}};window.growsumo=b}();
